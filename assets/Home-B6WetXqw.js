import{an as L,b as M,ao as N,ap as m,aq as V,d as n,ar as e,as as r,at as i,au as v,av as w,aw as $,ax as f,ay as _,az as D,aA as H,aB as U}from"./index-CjIuWgD8.js";import{u as A,a as E,_ as F}from"./_plugin-vue_export-helper-CQqKSQCG.js";import{l as P}from"./logo-family-Cax3AFxD.js";const R={class:"home"},G={class:"main-content"},I={class:"hero-section"},J={class:"hero-content"},K=["src"],Q={class:"summary-section"},W={class:"section-header"},X={class:"section-subtitle"},Y={class:"summary-total"},Z={class:"total-count"},tt={class:"quick-actions"},et=L({__name:"Home",setup(ot){const p=w(),g=A(),z=E(),y=M(0);N(()=>{});const k=m(()=>g.next7Days()),C=m(()=>{var o;return((o=k.value[0])==null?void 0:o.value)||""}),B=m(()=>{var o;return((o=k.value[0])==null?void 0:o.label)||"今天"}),T=["breakfast","lunch","dinner"],h={breakfast:"早餐",lunch:"午餐",dinner:"晚餐"},x=m(()=>T.map(o=>{const t=z.getCounts(C.value,o),u=Object.entries(t).filter(([a,l])=>l>0).map(([a,l])=>{const c=g.dishes.find(d=>d.id===a);return"".concat((c==null?void 0:c.name)||a,"×").concat(l)}),b=Object.values(t).reduce((a,l)=>a+(l||0),0);return{meal:o,label:h[o],items:u,total:b}})),O=m(()=>x.value.reduce((o,t)=>o+t.total,0));function S(o){p.push({path:"/order",query:{date:C.value,meal:o}})}function j(){console.log("跳转到个人页面")}return(o,t)=>{const u=i("van-icon"),b=i("van-nav-bar"),a=i("van-button"),l=i("van-cell"),c=i("van-cell-group"),d=i("van-tabbar-item"),q=i("van-tabbar");return f(),V("div",R,[n(b,{title:"今天吃什么",fixed:"",placeholder:""},{right:r(()=>[n(u,{name:"user-o",size:"20",onClick:j})]),_:1}),e("div",G,[e("div",I,[e("div",J,[e("img",{class:"logo",src:v(P),alt:"家庭logo"},null,8,K),t[5]||(t[5]=e("h1",{class:"title"},"今天吃什么",-1)),t[6]||(t[6]=e("p",{class:"subtitle"},"为您的家庭提供美味食谱推荐",-1)),n(a,{type:"primary",size:"large",round:"",onClick:t[0]||(t[0]=s=>v(p).push("/order")),class:"start-button"},{default:r(()=>[...t[4]||(t[4]=[_(" 开始点餐 ",-1)])]),_:1})])]),e("div",Q,[e("div",W,[t[7]||(t[7]=e("h2",{class:"section-title"},"今日汇总",-1)),e("span",X,$(B.value),1)]),n(c,{inset:"",class:"summary-list"},{default:r(()=>[(f(!0),V(D,null,H(x.value,s=>(f(),U(l,{key:s.meal,title:s.label,label:s.items.length?s.items.join("，"):"暂无菜品",value:s.total>0?s.total+" 份":"","is-link":"",onClick:st=>S(s.meal),class:"summary-item"},null,8,["title","label","value","onClick"]))),128))]),_:1}),e("div",Y,[t[8]||(t[8]=e("span",null,"总计",-1)),e("span",Z,$(O.value)+" 份",1)])]),e("div",tt,[e("div",{class:"action-item",onClick:t[1]||(t[1]=s=>v(p).push("/plan"))},[n(u,{name:"orders-o",size:"24"}),t[9]||(t[9]=e("span",null,"未来食谱",-1))]),e("div",{class:"action-item",onClick:t[2]||(t[2]=s=>v(p).push("/order"))},[n(u,{name:"shopping-cart-o",size:"24"}),t[10]||(t[10]=e("span",null,"立即点餐",-1))])])]),n(q,{modelValue:y.value,"onUpdate:modelValue":t[3]||(t[3]=s=>y.value=s),route:"",fixed:"",placeholder:"","safe-area-inset-bottom":""},{default:r(()=>[n(d,{replace:"",to:"/",icon:"home-o"},{default:r(()=>[...t[11]||(t[11]=[_("首页",-1)])]),_:1}),n(d,{replace:"",to:"/order",icon:"shopping-cart-o"},{default:r(()=>[...t[12]||(t[12]=[_("点餐",-1)])]),_:1}),n(d,{replace:"",to:"/plan",icon:"orders-o"},{default:r(()=>[...t[13]||(t[13]=[_("食谱",-1)])]),_:1})]),_:1},8,["modelValue"])])}}}),rt=F(et,[["__scopeId","data-v-2fa0c0bf"]]);export{rt as default};

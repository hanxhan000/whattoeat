import{ap as L,aq as M,b as N,ar as w,as as f,at as $,d as n,au as o,av as a,aw as d,ax as p,ay as E,az as z,aA as _,aB as c,aC as H,aD as U,aE as A}from"./index-CYOHEeXN.js";import{u as F}from"./order-BknwCu4h.js";import{l as P}from"./logo-family-warm-2oHN8ny6.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"home"},I={class:"main-content"},J={class:"hero-section"},K={class:"hero-content"},Q=["src"],W={class:"summary-section"},X={class:"section-header"},Y={class:"section-subtitle"},Z={class:"summary-total"},h={class:"total-count"},tt={class:"quick-actions"},ot=L({__name:"Home",setup(et){const m=E(),g=M(),V=F(),k=N(0);w(()=>{});const y=f(()=>g.next7Days()),C=f(()=>{var e;return((e=y.value[0])==null?void 0:e.value)||""}),B=f(()=>{var e;return((e=y.value[0])==null?void 0:e.label)||"今天"}),T=["breakfast","lunch","dinner"],O={breakfast:"早餐",lunch:"午餐",dinner:"晚餐"},x=f(()=>T.map(e=>{const t=V.getCounts(C.value,e),l=Object.entries(t).filter(([r,i])=>i>0).map(([r,i])=>{const v=g.dishes.find(u=>u.id===r);return"".concat((v==null?void 0:v.name)||r,"×").concat(i)}),b=Object.values(t).reduce((r,i)=>r+(i||0),0);return{meal:e,label:O[e],items:l,total:b}})),S=f(()=>x.value.reduce((e,t)=>e+t.total,0));function j(e){m.push({path:"/order",query:{date:C.value,meal:e}})}function q(){console.log("跳转到个人页面")}return(e,t)=>{const l=d("van-icon"),b=d("van-nav-bar"),r=d("van-button"),i=d("van-cell"),v=d("van-cell-group"),u=d("van-tabbar-item"),D=d("van-tabbar");return _(),$("div",G,[n(b,{title:"今天吃什么",fixed:"",placeholder:""},{right:a(()=>[n(l,{name:"user-o",size:"20",onClick:q})]),_:1}),o("div",I,[o("div",J,[o("div",K,[o("img",{class:"logo",src:p(P),alt:"家庭logo"},null,8,Q),t[7]||(t[7]=o("h1",{class:"title"},"今天吃什么",-1)),t[8]||(t[8]=o("p",{class:"subtitle"},"为您的家庭提供美味食谱推荐",-1)),n(r,{type:"primary",size:"large",round:"",onClick:t[0]||(t[0]=s=>p(m).push("/order")),class:"start-button"},{default:a(()=>[...t[6]||(t[6]=[c(" 开始点餐 ",-1)])]),_:1})])]),o("div",W,[o("div",X,[t[9]||(t[9]=o("h2",{class:"section-title"},"今日汇总",-1)),o("span",Y,z(B.value),1)]),n(v,{inset:"",class:"summary-list"},{default:a(()=>[(_(!0),$(H,null,U(x.value,s=>(_(),A(i,{key:s.meal,title:s.label,label:s.items.length?s.items.join("，"):"暂无菜品",value:s.total>0?s.total+" 份":"","is-link":"",onClick:st=>j(s.meal),class:"summary-item"},null,8,["title","label","value","onClick"]))),128))]),_:1}),o("div",Z,[t[10]||(t[10]=o("span",null,"总计",-1)),o("span",h,z(S.value)+" 份",1)])]),o("div",tt,[o("div",{class:"action-item",onClick:t[1]||(t[1]=s=>p(m).push("/plan"))},[n(l,{name:"orders-o",size:"24"}),t[11]||(t[11]=o("span",null,"未来食谱",-1))]),o("div",{class:"action-item",onClick:t[2]||(t[2]=s=>p(m).push("/order"))},[n(l,{name:"shopping-cart-o",size:"24"}),t[12]||(t[12]=o("span",null,"立即点餐",-1))]),o("div",{class:"action-item",onClick:t[3]||(t[3]=s=>p(m).push("/cart"))},[n(l,{name:"todo-list-o",size:"24"}),t[13]||(t[13]=o("span",null,"购物清单",-1))]),o("div",{class:"action-item",onClick:t[4]||(t[4]=s=>p(m).push("/org"))},[n(l,{name:"friends-o",size:"24"}),t[14]||(t[14]=o("span",null,"家庭/组织",-1))])])]),n(D,{modelValue:k.value,"onUpdate:modelValue":t[5]||(t[5]=s=>k.value=s),route:"",fixed:"",placeholder:"","safe-area-inset-bottom":""},{default:a(()=>[n(u,{replace:"",to:"/",icon:"home-o"},{default:a(()=>[...t[15]||(t[15]=[c("首页",-1)])]),_:1}),n(u,{replace:"",to:"/order",icon:"shopping-cart-o"},{default:a(()=>[...t[16]||(t[16]=[c("点餐",-1)])]),_:1}),n(u,{replace:"",to:"/plan",icon:"orders-o"},{default:a(()=>[...t[17]||(t[17]=[c("食谱",-1)])]),_:1}),n(u,{replace:"",to:"/cart",icon:"todo-list-o"},{default:a(()=>[...t[18]||(t[18]=[c("清单",-1)])]),_:1}),n(u,{replace:"",to:"/org",icon:"friends-o"},{default:a(()=>[...t[19]||(t[19]=[c("组织",-1)])]),_:1})]),_:1},8,["modelValue"])])}}}),it=R(ot,[["__scopeId","data-v-d67fb64e"]]);export{it as default};

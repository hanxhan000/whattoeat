System.register(["./index-legacy-CNR_Qhze.js","./order-legacy-Cv0HZm4J.js","./_plugin-vue_export-helper-legacy-BVIICed7.js"],function(e,a){"use strict";var t,i,c,o,s,l,d,r,n,u,f,v,p,h,g,m,x,y,w,b,k,C;return{setters:[e=>{t=e.ap,i=e.aq,c=e.b,o=e.as,s=e.ar,l=e.aF,d=e.w,r=e.at,n=e.d,u=e.au,f=e.av,v=e.ax,p=e.ay,h=e.aw,g=e.az,m=e.aA,x=e.aC,y=e.aD,w=e.aE,b=e.aG},e=>{k=e.u},e=>{C=e._}],execute:function(){var L=document.createElement("style");L.textContent=".order[data-v-c67241cc]{min-height:calc(var(--vh, 1vh) * 100);background:#f5f5f5}.family-header[data-v-c67241cc]{display:flex;align-items:center;gap:12px;padding:16px;background:#fff;border-bottom:1px solid #f0f0f0}.family-info[data-v-c67241cc]{flex:1}.family-name[data-v-c67241cc]{font-size:16px;font-weight:600;color:#333}.family-date[data-v-c67241cc]{font-size:14px;color:#999;margin-top:4px}.meal-tabs[data-v-c67241cc]{position:sticky;top:0;z-index:10}.main-content[data-v-c67241cc]{padding:16px 16px 100px}.menu-container[data-v-c67241cc]{display:flex;background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 2px 12px rgba(0,0,0,.05)}.category-sidebar[data-v-c67241cc]{width:100px;flex-shrink:0;border-right:1px solid #f0f0f0}[data-v-c67241cc] .van-sidebar-item{text-align:center;padding:20px 12px}[data-v-c67241cc] .van-sidebar-item--select{background:#e6f2ff;border-right:3px solid #1989fa}.dish-list-container[data-v-c67241cc]{flex:1;padding:16px}.dish-grid[data-v-c67241cc]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.dish-card[data-v-c67241cc]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,.05);transition:all .2s}.dish-card[data-v-c67241cc]:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.1)}.dish-image-container[data-v-c67241cc]{position:relative}.image-placeholder[data-v-c67241cc]{display:flex;align-items:center;justify-content:center;width:100%;height:120px;background:#f8f9fa}.dish-info[data-v-c67241cc]{padding:12px}.dish-name[data-v-c67241cc]{font-size:15px;font-weight:600;color:#333;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.dish-category[data-v-c67241cc]{font-size:12px;color:#999;margin-bottom:12px}.dish-actions[data-v-c67241cc]{display:flex;justify-content:center}.order-summary[data-v-c67241cc]{background:#fff;border-radius:16px;padding:16px;margin-top:16px;box-shadow:0 2px 12px rgba(0,0,0,.05)}.summary-item[data-v-c67241cc]{display:flex;justify-content:space-between;align-items:center;padding:8px 0;font-size:14px}.summary-item[data-v-c67241cc]:first-child{border-bottom:1px solid #f0f0f0}.summary-item span[data-v-c67241cc]:last-child{font-weight:600;color:#1989fa}.submit-tip[data-v-c67241cc]{display:flex;align-items:center;gap:4px;font-size:12px;color:#999}@media(max-width:360px){.dish-grid[data-v-c67241cc]{grid-template-columns:1fr}.category-sidebar[data-v-c67241cc]{width:80px}[data-v-c67241cc] .van-sidebar-item{padding:16px 8px;font-size:13px}}@media(min-width:768px){.dish-grid[data-v-c67241cc]{grid-template-columns:repeat(3,1fr)}.main-content[data-v-c67241cc]{max-width:1200px;margin:0 auto}.menu-container[data-v-c67241cc]{height:calc(100vh - 280px)}.dish-list-container[data-v-c67241cc]{height:100%;overflow-y:auto}}\n/*$vite$:1*/",document.head.appendChild(L);const F={class:"order"},z={class:"family-header"},_={class:"family-info"},j={class:"family-name"},D={class:"family-date"},G={class:"main-content"},S={class:"menu-container"},A={class:"dish-list-container"},M={class:"dish-grid"},T={class:"dish-image-container"},V={class:"image-placeholder"},U={class:"image-placeholder"},Z={class:"dish-info"},$={class:"dish-name"},q={class:"dish-category"},B={class:"dish-actions"},E={class:"order-summary"},I={class:"summary-item"},O={class:"summary-item"},Y={class:"submit-tip"};e("default",C(t({__name:"Order",setup(e){const t=p(),C=l(),L=i(),H=k(),N=c("data:image/svg+xml,%3csvg%20width='128'%20height='128'%20viewBox='0%200%20128%20128'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3clinearGradient%20id='g1'%20x1='0'%20x2='1'%20y1='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23FF8A00'/%3e%3cstop%20offset='100%25'%20stop-color='%23FF3D68'/%3e%3c/linearGradient%3e%3clinearGradient%20id='g2'%20x1='0'%20x2='1'%20y1='1'%20y2='0'%3e%3cstop%20offset='0%25'%20stop-color='%23FFD7A2'/%3e%3cstop%20offset='100%25'%20stop-color='%23FFC0CC'/%3e%3c/linearGradient%3e%3clinearGradient%20id='g3'%20x1='0'%20x2='1'%20y1='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23FFA726'/%3e%3cstop%20offset='100%25'%20stop-color='%23FF7043'/%3e%3c/linearGradient%3e%3cfilter%20id='shadow'%20x='-20%25'%20y='-20%25'%20width='140%25'%20height='140%25'%3e%3cfeDropShadow%20dx='0'%20dy='4'%20stdDeviation='4'%20flood-color='%23ff9f6a'%20flood-opacity='0.35'/%3e%3c/filter%3e%3c/defs%3e%3c!--%20房屋主体%20--%3e%3crect%20x='12'%20y='60'%20width='104'%20height='52'%20rx='10'%20fill='%23fff'%20stroke='url(%23g1)'%20stroke-width='4'%20filter='url(%23shadow)'/%3e%3c!--%20屋顶%20--%3e%3cpath%20d='M64%2018%20L16%2052%20L24%2052%20L24%2060%20L104%2060%20L104%2052%20L112%2052%20Z'%20fill='url(%23g1)'%20opacity='0.25'/%3e%3c!--%20房门%20--%3e%3cpath%20d='M64%2030%20L28%2056%20L28%20108%20L100%20108%20L100%2056%20Z'%20fill='%23fff'%20stroke='url(%23g1)'%20stroke-width='3'/%3e%3c!--%20心形装饰%20--%3e%3cpath%20d='M64%2048%20C54%2036%2036%2040%2032%2056%20C30%2064%2036%2076%2064%2092%20C92%2076%2098%2064%2096%2056%20C92%2040%2074%2036%2064%2048%20Z'%20fill='url(%23g2)'%20stroke='url(%23g1)'%20stroke-width='2'/%3e%3c!--%20屋顶装饰%20--%3e%3ccircle%20cx='64'%20cy='18'%20r='6'%20fill='url(%23g1)'/%3e%3c!--%20窗户%20--%3e%3crect%20x='35'%20y='70'%20width='20'%20height='20'%20rx='3'%20fill='url(%23g2)'%20stroke='url(%23g3)'%20stroke-width='2'/%3e%3crect%20x='73'%20y='70'%20width='20'%20height='20'%20rx='3'%20fill='url(%23g2)'%20stroke='url(%23g3)'%20stroke-width='2'/%3e%3c!--%20窗户十字%20--%3e%3cline%20x1='45'%20y1='70'%20x2='45'%20y2='90'%20stroke='url(%23g3)'%20stroke-width='2'/%3e%3cline%20x1='35'%20y1='80'%20x2='55'%20y2='80'%20stroke='url(%23g3)'%20stroke-width='2'/%3e%3cline%20x1='83'%20y1='70'%20x2='83'%20y2='90'%20stroke='url(%23g3)'%20stroke-width='2'/%3e%3cline%20x1='73'%20y1='80'%20x2='93'%20y2='80'%20stroke='url(%23g3)'%20stroke-width='2'/%3e%3c/svg%3e"),J=c("温馨小家"),K=c("lunch"),P=o(()=>({breakfast:"早餐",lunch:"午餐",dinner:"晚餐"}[K.value])),Q=c(!1),R=o(()=>L.next7Days()),W=c(R.value[0]?.value||`${(X=new Date).getFullYear()}-${String(X.getMonth()+1).padStart(2,"0")}-${String(X.getDate()).padStart(2,"0")}`);var X;const ee=o(()=>R.value.find(e=>e.value===W.value)?.label||"今天");function ae(){Q.value=!0}const te=o(()=>R.value.map(e=>({name:e.label,value:e.value})));function ie(e){W.value=e.value,Q.value=!1,re()}const ce=c(0),oe=o(()=>L.categories);function se(e){const a=H.getCounts(W.value,K.value),t=L.dishes.filter(a=>a.categoryId===e).reduce((e,t)=>e+(a[t.id]||0),0);return t>0?t:void 0}const le=o(()=>{const e=oe.value[ce.value];return L.dishes.filter(a=>a.categoryId===e?.id)}),de=c({});function re(){de.value=H.getCounts(W.value,K.value)}const ne=o(()=>Object.values(de.value).filter(e=>e>0).length),ue=o(()=>Object.values(de.value).reduce((e,a)=>e+(a||0),0));async function fe(){try{b(async()=>{const{showToast:e}=await a.import("./index-legacy-DWOacDN_.js");return{showToast:e}},void 0).then(({showToast:e})=>e({message:"点餐提交成功！",type:"success",duration:1500})),setTimeout(()=>{t.push("/")},1500)}catch(e){b(async()=>{const{showToast:e}=await a.import("./index-legacy-DWOacDN_.js");return{showToast:e}},void 0).then(({showToast:e})=>e({message:"提交失败，请重试",type:"fail"}))}}return s(()=>{const e=C.query.date||W.value;W.value=e;const a=C.query.meal;K.value=a||function(){const e=(new Date).getHours();return e<10?"breakfast":e<16?"lunch":"dinner"}(),re()}),d(K,()=>{re()}),d(W,()=>{re()}),(e,a)=>{const i=h("van-icon"),c=h("van-nav-bar"),o=h("van-image"),s=h("van-tab"),l=h("van-tabs"),d=h("van-sidebar-item"),p=h("van-sidebar"),b=h("van-stepper"),k=h("van-list"),C=h("van-submit-bar"),L=h("van-action-sheet");return m(),r("div",F,[n(c,{title:"点餐","left-arrow":"",fixed:"",placeholder:"",onClickLeft:a[0]||(a[0]=e=>v(t).go(-1))},{right:f(()=>[n(i,{name:"calendar-o",size:"20",onClick:ae})]),_:1}),u("div",z,[n(o,{src:N.value,width:"40",height:"40",round:""},null,8,["src"]),u("div",_,[u("div",j,g(J.value),1),u("div",D,g(ee.value)+" · "+g(P.value),1)])]),n(l,{active:K.value,"onUpdate:active":a[1]||(a[1]=e=>K.value=e),class:"meal-tabs",type:"card",color:"#1989fa",background:"#f5f5f5",animated:""},{default:f(()=>[n(s,{title:"早餐",name:"breakfast"}),n(s,{title:"午餐",name:"lunch"}),n(s,{title:"晚餐",name:"dinner"})]),_:1},8,["active"]),u("div",G,[u("div",S,[n(p,{modelValue:ce.value,"onUpdate:modelValue":a[2]||(a[2]=e=>ce.value=e),class:"category-sidebar"},{default:f(()=>[(m(!0),r(x,null,y(oe.value,e=>(m(),w(d,{key:e.id,title:e.name,badge:se(e.id)},null,8,["title","badge"]))),128))]),_:1},8,["modelValue"]),u("div",A,[n(k,{"finished-text":"没有更多了"},{default:f(()=>[u("div",M,[(m(!0),r(x,null,y(le.value,e=>(m(),r("div",{key:e.id,class:"dish-card"},[u("div",T,[n(o,{src:e.imageUrl||v("data:image/svg+xml,%3csvg%20width='128'%20height='96'%20viewBox='0%200%20128%2096'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3clinearGradient%20id='bg'%20x1='0'%20x2='1'%20y1='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%237AD3E7'/%3e%3cstop%20offset='100%25'%20stop-color='%23A78BFA'/%3e%3c/linearGradient%3e%3c/defs%3e%3crect%20x='0'%20y='0'%20width='128'%20height='96'%20rx='12'%20fill='url(%23bg)'/%3e%3cg%20fill='%23fff'%20stroke='%23fff'%20stroke-width='1.5'%20opacity='0.95'%3e%3cpath%20d='M24%2062%20C24%2074%20104%2074%20104%2062%20C88%2062%2072%2054%2064%2046%20C56%2054%2040%2062%2024%2062%20Z'/%3e%3cpath%20d='M40%2030%20L42%2028%20L80%2056%20L78%2058%20Z'/%3e%3cpath%20d='M48%2024%20L50%2022%20L88%2050%20L86%2052%20Z'/%3e%3c/g%3e%3c/svg%3e"),width:"100%",height:"120",fit:"cover",radius:"12"},{loading:f(()=>[u("div",V,[n(i,{name:"photo",size:"24",color:"#ccc"})])]),error:f(()=>[u("div",U,[n(i,{name:"photo-fail",size:"24",color:"#ccc"})])]),_:1},8,["src"])]),u("div",Z,[u("div",$,g(e.name),1),u("div",q,g(e.categoryName),1),u("div",B,[n(b,{modelValue:de.value[e.id],"onUpdate:modelValue":a=>de.value[e.id]=a,integer:"",min:"0",max:"99",theme:"round","button-size":"24",onChange:a=>{return t=e.id,i=de.value[e.id]??0,void H.setCount(W.value,K.value,t,i||0);var t,i}},null,8,["modelValue","onUpdate:modelValue","onChange"])])])]))),128))])]),_:1})])]),u("div",E,[u("div",I,[a[4]||(a[4]=u("span",null,"已选菜品",-1)),u("span",null,g(ne.value)+" 道",1)]),u("div",O,[a[5]||(a[5]=u("span",null,"总计份数",-1)),u("span",null,g(ue.value)+" 份",1)])])]),n(C,{price:100*ue.value,"button-text":"提交点餐",onSubmit:fe,"safe-area-inset-bottom":""},{tip:f(()=>[u("div",Y,[n(i,{name:"info-o"}),a[6]||(a[6]=u("span",null,"提交后可在食谱页面查看",-1))])]),_:1},8,["price"]),n(L,{show:Q.value,"onUpdate:show":a[3]||(a[3]=e=>Q.value=e),actions:te.value,"cancel-text":"取消",onSelect:ie,"close-on-click-action":""},null,8,["show","actions"])])}}}),[["__scopeId","data-v-c67241cc"]]))}}});

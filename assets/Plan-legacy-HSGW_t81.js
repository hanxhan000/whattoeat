System.register(["./index-legacy-CeLP1qUU.js","./_plugin-vue_export-helper-legacy-CaiWicc0.js"],function(e,a){"use strict";var t,d,n,l,i,o,s,r,c,p,f,v,b,x,u,m,g,h,w,y,k;return{setters:[e=>{t=e.an,d=e.ap,n=e.at,l=e.aq,i=e.ax,o=e.aE,s=e.ar,r=e.aw,c=e.d,p=e.aF,f=e.az,v=e.aA,b=e.as,x=e.ay,u=e.b,m=e.au,g=e.av,h=e.aB},e=>{w=e.a,y=e.u,k=e._}],execute:function(){var a=document.createElement("style");a.textContent=".meal-card[data-v-1b5d1e2b]{background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 2px 12px rgba(0,0,0,.05);transition:all .2s;border:2px solid transparent}.meal-card[data-v-1b5d1e2b]:hover{transform:translateY(-2px);box-shadow:0 4px 16px rgba(0,0,0,.1)}.meal-card.has-selection[data-v-1b5d1e2b]{border-color:#1989fa}.card-header[data-v-1b5d1e2b]{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid #f0f0f0;background:#fafafa}.header-left[data-v-1b5d1e2b]{flex:1}.meal-title[data-v-1b5d1e2b]{font-size:16px;font-weight:600;color:#333;margin:0 0 4px}.deadline-tag[data-v-1b5d1e2b]{display:flex;align-items:center;gap:4px;font-size:12px;color:#999}.header-right[data-v-1b5d1e2b]{flex-shrink:0}.selection-count[data-v-1b5d1e2b]{font-size:12px;color:#1989fa;background:#e6f2ff;padding:2px 8px;border-radius:12px}.card-content[data-v-1b5d1e2b]{padding:20px 16px;min-height:120px}.empty-state[data-v-1b5d1e2b]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100px;color:#ccc}.empty-text[data-v-1b5d1e2b]{margin-top:8px;font-size:14px}.selection-list[data-v-1b5d1e2b]{display:flex;flex-direction:column;gap:12px}.selected-item[data-v-1b5d1e2b]{display:flex;align-items:center;gap:8px;padding:8px 12px;background:#f8f9fa;border-radius:12px}.dish-name[data-v-1b5d1e2b]{font-size:14px;color:#666;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card-footer[data-v-1b5d1e2b]{padding:0 16px 16px}[data-v-1b5d1e2b] .van-button{font-size:14px;height:36px}@media(min-width:768px){.meal-card[data-v-1b5d1e2b]{height:100%;display:flex;flex-direction:column}.card-content[data-v-1b5d1e2b]{flex:1;display:flex;align-items:center}.empty-state[data-v-1b5d1e2b]{flex:1}}.plan[data-v-f87b6c1d]{min-height:100vh;background:#f5f5f5}.main-content[data-v-f87b6c1d]{padding:16px 16px 24px}.date-navigation[data-v-f87b6c1d]{background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 2px 12px rgba(0,0,0,.05);margin-bottom:16px}[data-v-f87b6c1d] .date-tabs .van-tabs__wrap{height:auto}[data-v-f87b6c1d] .date-tabs .van-tab{flex:none;padding:0 16px;font-size:14px}.day-content[data-v-f87b6c1d]{padding:20px 16px}.day-header[data-v-f87b6c1d]{display:flex;align-items:center;gap:8px;margin-bottom:20px;padding:12px 16px;background:#e6f2ff;border-radius:12px;color:#1989fa}.day-title[data-v-f87b6c1d]{font-size:16px;font-weight:600}.meals-container[data-v-f87b6c1d]{display:flex;flex-direction:column;gap:16px}.overview-section[data-v-f87b6c1d]{background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 2px 12px rgba(0,0,0,.05)}.section-header[data-v-f87b6c1d]{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid #f0f0f0}.section-title[data-v-f87b6c1d]{font-size:16px;font-weight:600;color:#333}.overview-content[data-v-f87b6c1d]{max-height:300px;overflow-y:auto}.overview-day[data-v-f87b6c1d]{padding:16px;border-bottom:1px solid #f0f0f0}.overview-day[data-v-f87b6c1d]:last-child{border-bottom:none}.overview-day-header[data-v-f87b6c1d]{margin-bottom:12px}.day-label[data-v-f87b6c1d]{font-weight:600;color:#333}.overview-meals[data-v-f87b6c1d]{display:flex;flex-direction:column;gap:8px}.overview-meal[data-v-f87b6c1d]{display:flex;justify-content:space-between;font-size:14px}.meal-label[data-v-f87b6c1d]{color:#999;min-width:40px}.meal-content[data-v-f87b6c1d]{flex:1;text-align:right;color:#666;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.collapsed-overview[data-v-f87b6c1d]{display:flex;align-items:center;justify-content:center;gap:8px;padding:16px;background:#fff;border-radius:16px;box-shadow:0 2px 12px rgba(0,0,0,.05);color:#1989fa;cursor:pointer}@media(min-width:768px){.main-content[data-v-f87b6c1d]{max-width:1200px;margin:0 auto}.meals-container[data-v-f87b6c1d]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}.overview-content[data-v-f87b6c1d]{max-height:400px}.overview-meals[data-v-f87b6c1d]{flex-direction:row;gap:20px}.overview-meal[data-v-f87b6c1d]{flex:1}}\n/*$vite$:1*/",document.head.appendChild(a);const $={class:"card-header"},_={class:"header-left"},z={class:"meal-title"},D={class:"deadline-tag"},j={class:"header-right"},C={key:0,class:"selection-count"},S={class:"card-content"},M={key:0,class:"empty-state"},L={key:1,class:"selection-list"},q={class:"dish-name"},E={class:"card-footer"},F=k(t({__name:"MealCard",props:{date:{},meal:{}},emits:["select-dish"],setup(e,{emit:a}){const t=e,u=a,m=w(),g=y(),h=d(()=>({breakfast:"早餐",lunch:"午餐",dinner:"晚餐"}[t.meal])),k=d(()=>({breakfast:"07:00",lunch:"11:00",dinner:"17:00"}[t.meal])),F=d(()=>{const e=m.getCounts(t.date,t.meal);return Object.entries(e).filter(([e,a])=>a>0).map(([e,a])=>{const t=g.dishes.find(a=>a.id===e);return t?`${t.name}×${a}`:`未知菜品(${e})×${a}`})});function I(){u("select-dish",t.date,t.meal)}return(e,a)=>{const t=n("van-icon"),d=n("van-button");return i(),l("div",{class:o(["meal-card",{"has-selection":F.value.length>0}])},[s("div",$,[s("div",_,[s("h3",z,r(h.value),1),s("div",D,[c(t,{name:"clock-o",size:"14"}),s("span",null,"截止："+r(k.value),1)])]),s("div",j,[F.value.length>0?(i(),l("div",C," 已选 "+r(F.value.length)+" 道 ",1)):p("",!0)])]),s("div",S,[0===F.value.length?(i(),l("div",M,[c(t,{name:"food-o",size:"32"}),a[0]||(a[0]=s("p",{class:"empty-text"},"还没有选择菜品",-1))])):(i(),l("div",L,[(i(!0),l(f,null,v(F.value,(e,a)=>(i(),l("div",{key:a,class:"selected-item"},[c(t,{name:"checked",color:"#1989fa"}),s("span",q,r(e),1)]))),128))]))]),s("div",E,[c(d,{type:"primary",size:"small",block:"",round:"",onClick:I},{default:b(()=>[x(r(F.value.length>0?"修改菜品":"选择菜品"),1)]),_:1})])],2)}}}),[["__scopeId","data-v-1b5d1e2b"]]),I={class:"plan"},Y={class:"main-content"},A={class:"date-navigation"},B={class:"day-content"},O={class:"day-header"},P={class:"day-title"},T={class:"meals-container"},U={key:0,class:"overview-section"},G={class:"section-header"},H={class:"overview-content"},J={class:"overview-day-header"},K={class:"day-label"},N={class:"overview-meals"},Q={class:"meal-label"},R={class:"meal-content"};e("default",k(t({__name:"Plan",setup(e){const a=g();function t(e){return`${e.getFullYear()}-${`${e.getMonth()+1}`.padStart(2,"0")}-${`${e.getDate()}`.padStart(2,"0")}`}const d=u(function(e=7){const a=[],d=new Date;for(let n=0;n<e;n++){const e=new Date(d.getTime()+864e5*n),l=["日","一","二","三","四","五","六"][e.getDay()];a.push({date:t(e),label:`${e.getMonth()+1}/${e.getDate()}`,fullLabel:`${e.getMonth()+1}月${e.getDate()}日 (星期${l})`})}return a}()),o=u(0),p=u(!1);function x(){p.value=!p.value}function w(e){return{breakfast:"早餐",lunch:"午餐",dinner:"晚餐"}[e]||e}function y(e,t){a.push({path:"/order",query:{date:e,meal:t}})}return(e,t)=>{const u=n("van-nav-bar"),g=n("van-icon"),k=n("van-tab"),$=n("van-tabs");return i(),l("div",I,[c(u,{title:"未来7天食谱","left-arrow":"",fixed:"",placeholder:"",onClickLeft:t[0]||(t[0]=e=>m(a).go(-1))}),s("div",Y,[s("div",A,[c($,{active:o.value,"onUpdate:active":t[1]||(t[1]=e=>o.value=e),class:"date-tabs",color:"#1989fa",background:"#f5f5f5",animated:"",swipeable:""},{default:b(()=>[(i(!0),l(f,null,v(d.value,(e,a)=>(i(),h(k,{key:e.date,title:e.label,name:a},{default:b(()=>[s("div",B,[s("div",O,[c(g,{name:"underway-o"}),s("span",P,r(e.fullLabel),1)]),s("div",T,[c(F,{date:e.date,meal:"breakfast",onSelectDish:y},null,8,["date"]),c(F,{date:e.date,meal:"lunch",onSelectDish:y},null,8,["date"]),c(F,{date:e.date,meal:"dinner",onSelectDish:y},null,8,["date"])])])]),_:2},1032,["title","name"]))),128))]),_:1},8,["active"])]),p.value?(i(),l("div",U,[s("div",G,[t[2]||(t[2]=s("h3",{class:"section-title"},"食谱概览",-1)),c(g,{name:"arrow-down",onClick:x})]),s("div",H,[(i(!0),l(f,null,v(d.value,e=>(i(),l("div",{key:e.date,class:"overview-day"},[s("div",J,[s("span",K,r(e.label),1)]),s("div",N,[(i(),l(f,null,v(["breakfast","lunch","dinner"],a=>s("div",{key:a,class:"overview-meal"},[s("span",Q,r(w(a)),1),s("span",R,r((e.date,"未选择")),1)])),64))])]))),128))])])):(i(),l("div",{key:1,class:"collapsed-overview",onClick:x},[c(g,{name:"arrow-up"}),t[3]||(t[3]=s("span",null,"展开食谱概览",-1))]))])])}}}),[["__scopeId","data-v-f87b6c1d"]]))}}});

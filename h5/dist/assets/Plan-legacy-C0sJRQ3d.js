System.register(["./index-legacy-C3qDVx6g.js","./_plugin-vue_export-helper-legacy-DIrtFDCD.js"],function(a,e){"use strict";var t,d,n,l,i,o,s,r,c,p,v,b,f,x,u,m,g,h,w,y,k;return{setters:[a=>{t=a.an,d=a.ap,n=a.at,l=a.aq,i=a.ax,o=a.aE,s=a.ar,r=a.aw,c=a.d,p=a.aF,v=a.az,b=a.aA,f=a.as,x=a.ay,u=a.b,m=a.au,g=a.av,h=a.aB},a=>{w=a.a,y=a.u,k=a._}],execute:function(){var e=document.createElement("style");e.textContent=".meal-card[data-v-1b5d1e2b]{background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 2px 12px rgba(0,0,0,.05);transition:all .2s;border:2px solid transparent}.meal-card[data-v-1b5d1e2b]:hover{transform:translateY(-2px);box-shadow:0 4px 16px rgba(0,0,0,.1)}.meal-card.has-selection[data-v-1b5d1e2b]{border-color:#1989fa}.card-header[data-v-1b5d1e2b]{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid #f0f0f0;background:#fafafa}.header-left[data-v-1b5d1e2b]{flex:1}.meal-title[data-v-1b5d1e2b]{font-size:16px;font-weight:600;color:#333;margin:0 0 4px}.deadline-tag[data-v-1b5d1e2b]{display:flex;align-items:center;gap:4px;font-size:12px;color:#999}.header-right[data-v-1b5d1e2b]{flex-shrink:0}.selection-count[data-v-1b5d1e2b]{font-size:12px;color:#1989fa;background:#e6f2ff;padding:2px 8px;border-radius:12px}.card-content[data-v-1b5d1e2b]{padding:20px 16px;min-height:120px}.empty-state[data-v-1b5d1e2b]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100px;color:#ccc}.empty-text[data-v-1b5d1e2b]{margin-top:8px;font-size:14px}.selection-list[data-v-1b5d1e2b]{display:flex;flex-direction:column;gap:12px}.selected-item[data-v-1b5d1e2b]{display:flex;align-items:center;gap:8px;padding:8px 12px;background:#f8f9fa;border-radius:12px}.dish-name[data-v-1b5d1e2b]{font-size:14px;color:#666;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card-footer[data-v-1b5d1e2b]{padding:0 16px 16px}[data-v-1b5d1e2b] .van-button{font-size:14px;height:36px}@media(min-width:768px){.meal-card[data-v-1b5d1e2b]{height:100%;display:flex;flex-direction:column}.card-content[data-v-1b5d1e2b]{flex:1;display:flex;align-items:center}.empty-state[data-v-1b5d1e2b]{flex:1}}.plan[data-v-6aa43ab5]{min-height:calc(var(--vh, 1vh) * 100);background:#f5f5f5}.main-content[data-v-6aa43ab5]{padding:16px 16px 24px}.date-navigation[data-v-6aa43ab5]{background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 2px 12px rgba(0,0,0,.05);margin-bottom:16px}[data-v-6aa43ab5] .date-tabs .van-tabs__wrap{height:auto}[data-v-6aa43ab5] .date-tabs .van-tab{flex:none;padding:0 16px;font-size:14px}.day-content[data-v-6aa43ab5]{padding:20px 16px}.day-header[data-v-6aa43ab5]{display:flex;align-items:center;gap:8px;margin-bottom:20px;padding:12px 16px;background:#e6f2ff;border-radius:12px;color:#1989fa}.day-title[data-v-6aa43ab5]{font-size:16px;font-weight:600}.meals-container[data-v-6aa43ab5]{display:flex;flex-direction:column;gap:16px}.overview-section[data-v-6aa43ab5]{background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 2px 12px rgba(0,0,0,.05)}.section-header[data-v-6aa43ab5]{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid #f0f0f0}.section-title[data-v-6aa43ab5]{font-size:16px;font-weight:600;color:#333}.overview-content[data-v-6aa43ab5]{max-height:300px;overflow-y:auto}.overview-day[data-v-6aa43ab5]{padding:16px;border-bottom:1px solid #f0f0f0}.overview-day[data-v-6aa43ab5]:last-child{border-bottom:none}.overview-day-header[data-v-6aa43ab5]{margin-bottom:12px}.day-label[data-v-6aa43ab5]{font-weight:600;color:#333}.overview-meals[data-v-6aa43ab5]{display:flex;flex-direction:column;gap:8px}.overview-meal[data-v-6aa43ab5]{display:flex;justify-content:space-between;font-size:14px}.meal-label[data-v-6aa43ab5]{color:#999;min-width:40px}.meal-content[data-v-6aa43ab5]{flex:1;text-align:right;color:#666;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.collapsed-overview[data-v-6aa43ab5]{display:flex;align-items:center;justify-content:center;gap:8px;padding:16px;background:#fff;border-radius:16px;box-shadow:0 2px 12px rgba(0,0,0,.05);color:#1989fa;cursor:pointer}@media(min-width:768px){.main-content[data-v-6aa43ab5]{max-width:1200px;margin:0 auto}.meals-container[data-v-6aa43ab5]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}.overview-content[data-v-6aa43ab5]{max-height:400px}.overview-meals[data-v-6aa43ab5]{flex-direction:row;gap:20px}.overview-meal[data-v-6aa43ab5]{flex:1}}\n/*$vite$:1*/",document.head.appendChild(e);const $={class:"card-header"},_={class:"header-left"},z={class:"meal-title"},D={class:"deadline-tag"},j={class:"header-right"},C={key:0,class:"selection-count"},S={class:"card-content"},M={key:0,class:"empty-state"},L={key:1,class:"selection-list"},q={class:"dish-name"},E={class:"card-footer"},F=k(t({__name:"MealCard",props:{date:{},meal:{}},emits:["select-dish"],setup(a,{emit:e}){const t=a,u=e,m=w(),g=y(),h=d(()=>({breakfast:"早餐",lunch:"午餐",dinner:"晚餐"}[t.meal])),k=d(()=>({breakfast:"07:00",lunch:"11:00",dinner:"17:00"}[t.meal])),F=d(()=>{const a=m.getCounts(t.date,t.meal);return Object.entries(a).filter(([a,e])=>e>0).map(([a,e])=>{const t=g.dishes.find(e=>e.id===a);return t?`${t.name}×${e}`:`未知菜品(${a})×${e}`})});function I(){u("select-dish",t.date,t.meal)}return(a,e)=>{const t=n("van-icon"),d=n("van-button");return i(),l("div",{class:o(["meal-card",{"has-selection":F.value.length>0}])},[s("div",$,[s("div",_,[s("h3",z,r(h.value),1),s("div",D,[c(t,{name:"clock-o",size:"14"}),s("span",null,"截止："+r(k.value),1)])]),s("div",j,[F.value.length>0?(i(),l("div",C," 已选 "+r(F.value.length)+" 道 ",1)):p("",!0)])]),s("div",S,[0===F.value.length?(i(),l("div",M,[c(t,{name:"food-o",size:"32"}),e[0]||(e[0]=s("p",{class:"empty-text"},"还没有选择菜品",-1))])):(i(),l("div",L,[(i(!0),l(v,null,b(F.value,(a,e)=>(i(),l("div",{key:e,class:"selected-item"},[c(t,{name:"checked",color:"#1989fa"}),s("span",q,r(a),1)]))),128))]))]),s("div",E,[c(d,{type:"primary",size:"small",block:"",round:"",onClick:I},{default:f(()=>[x(r(F.value.length>0?"修改菜品":"选择菜品"),1)]),_:1})])],2)}}}),[["__scopeId","data-v-1b5d1e2b"]]),I={class:"plan"},Y={class:"main-content"},A={class:"date-navigation"},B={class:"day-content"},O={class:"day-header"},P={class:"day-title"},T={class:"meals-container"},U={key:0,class:"overview-section"},G={class:"section-header"},H={class:"overview-content"},J={class:"overview-day-header"},K={class:"day-label"},N={class:"overview-meals"},Q={class:"meal-label"},R={class:"meal-content"};a("default",k(t({__name:"Plan",setup(a){const e=g();function t(a){return`${a.getFullYear()}-${`${a.getMonth()+1}`.padStart(2,"0")}-${`${a.getDate()}`.padStart(2,"0")}`}const d=u(function(a=7){const e=[],d=new Date;for(let n=0;n<a;n++){const a=new Date(d.getTime()+864e5*n),l=["日","一","二","三","四","五","六"][a.getDay()];e.push({date:t(a),label:`${a.getMonth()+1}/${a.getDate()}`,fullLabel:`${a.getMonth()+1}月${a.getDate()}日 (星期${l})`})}return e}()),o=u(0),p=u(!1);function x(){p.value=!p.value}function w(a){return{breakfast:"早餐",lunch:"午餐",dinner:"晚餐"}[a]||a}function y(a,t){e.push({path:"/order",query:{date:a,meal:t}})}return(a,t)=>{const u=n("van-nav-bar"),g=n("van-icon"),k=n("van-tab"),$=n("van-tabs");return i(),l("div",I,[c(u,{title:"未来7天食谱","left-arrow":"",fixed:"",placeholder:"",onClickLeft:t[0]||(t[0]=a=>m(e).go(-1))}),s("div",Y,[s("div",A,[c($,{active:o.value,"onUpdate:active":t[1]||(t[1]=a=>o.value=a),class:"date-tabs",color:"#1989fa",background:"#f5f5f5",animated:"",swipeable:""},{default:f(()=>[(i(!0),l(v,null,b(d.value,(a,e)=>(i(),h(k,{key:a.date,title:a.label,name:e},{default:f(()=>[s("div",B,[s("div",O,[c(g,{name:"underway-o"}),s("span",P,r(a.fullLabel),1)]),s("div",T,[c(F,{date:a.date,meal:"breakfast",onSelectDish:y},null,8,["date"]),c(F,{date:a.date,meal:"lunch",onSelectDish:y},null,8,["date"]),c(F,{date:a.date,meal:"dinner",onSelectDish:y},null,8,["date"])])])]),_:2},1032,["title","name"]))),128))]),_:1},8,["active"])]),p.value?(i(),l("div",U,[s("div",G,[t[2]||(t[2]=s("h3",{class:"section-title"},"食谱概览",-1)),c(g,{name:"arrow-down",onClick:x})]),s("div",H,[(i(!0),l(v,null,b(d.value,a=>(i(),l("div",{key:a.date,class:"overview-day"},[s("div",J,[s("span",K,r(a.label),1)]),s("div",N,[(i(),l(v,null,b(["breakfast","lunch","dinner"],e=>s("div",{key:e,class:"overview-meal"},[s("span",Q,r(w(e)),1),s("span",R,r((a.date,"未选择")),1)])),64))])]))),128))])])):(i(),l("div",{key:1,class:"collapsed-overview",onClick:x},[c(g,{name:"arrow-up"}),t[3]||(t[3]=s("span",null,"展开食谱概览",-1))]))])])}}}),[["__scopeId","data-v-6aa43ab5"]]))}}});
